---

- name: disable user list
  ansible.builtin.lineinfile:
    path: /etc/gdm3/greeter.dconf-defaults
    regexp: '^disable-user-list='
    line: "disable-user-list=true"

- name: ensure vendor images path exists
  ansible.builtin.file:
    path: /usr/share/images/
    state: directory
    mode: '0755'
    owner: root
    group: root

- name: ensure login background image exists
  ansible.builtin.copy:
    src: kreuz_loginscreen.jpg
    dest: /usr/share/images/kreuz_loginscreen.jpg
    owner: root
    group: root
    mode: '0644'

- name: configure login background image
  ansible.builtin.lineinfile:
    path: /etc/gdm3/greeter.dconf-defaults
    regexp: '^picture-uri='
    line: "picture-uri='file:///usr/share/images/kreuz_loginscreen.jpg'"

